# Difyを使った初心者向け業務自動化ハンズオン
## 参加者向けハンドアウト

### ワークショップの概要

**目標**：Difyプラットフォームを使用して、ワークフロー機能を活用した業務自動化アプリを構築する実践的なスキルを習得する

**対象者**：AIやノーコードツールの初心者、プログラミング経験がなくてもAIツールを活用したいビジネスパーソン

**所要時間**：2時間

### 環境準備

1. **必要なもの**
   - ノートパソコン（Windows/Mac/Linux）
   - 安定したインターネット接続
   - 最新のWebブラウザ（Chrome/Firefox/Safari推奨）

2. **Difyアカウント作成**
   - [Dify公式サイト](https://dify.ai/)にアクセス
   - GitHubまたはGoogleアカウントでサインアップ

3. **APIキー設定**
   - OpenAI APIキーをお持ちの方：設定メニューからAPIキーを設定
   - お持ちでない方：ハンズオン用の共有アカウントを使用（講師から案内）

### Dify基本情報

**Difyとは**：オープンソースのLLMアプリ開発プラットフォームで、ノーコードでAIアプリケーションを構築できます。

**主な特徴**：
- 直感的なビジュアルインターフェース
- 多様なAIモデルに対応（OpenAI、Anthropic、Azure OpenAIなど）
- RAG（検索拡張生成）機能搭載
- 外部ツール連携が可能

**ワークフロー機能**：
- 小さな処理のステップ（ノード）を組み合わせて自動化
- 視覚的にノードを配置・接続してフローを構築
- 条件分岐や変数を活用した柔軟な処理が可能

### 主要なノード（ブロック）の種類

| ノード名 | 機能 | 使用例 |
|---------|------|--------|
| 開始 | ワークフローの起点 | ユーザー入力の受け取り |
| LLM | AIモデルを使った処理 | テキスト生成、質問回答、要約 |
| 質問分類器 | 入力内容に基づいて処理を振り分け | 質問タイプの分類、意図の判別 |
| IF/ELSE | 条件分岐の実装 | 特定の条件に基づく処理の分岐 |
| 知識取得 | 外部情報の参照（RAG） | ドキュメントからの情報検索 |
| 終了/回答 | 結果の出力 | 処理結果の表示 |
| コード | カスタムコードの実行 | 複雑な処理、外部API連携 |
| イテレーション | 繰り返し処理 | リスト内の各項目に同じ処理を適用 |
| テンプレート | 定型文の活用 | 出力フォーマットの統一 |

### 「ビジネスアシスタント」アプリ開発手順

#### 1. アプリの作成とワークフロー選択
- 「新規アプリケーション作成」ボタンをクリック
- アプリケーション名を「ビジネスアシスタント」と入力
- アプリケーションタイプで「チャットフロー」を選択
- 「作成」ボタンをクリック

#### 2. 基本構造の設計
- 開始ノードを確認（デフォルトで配置されています）
- 質問分類器ノードを追加（開始ノードの「+」ボタンをクリック）
- 質問分類器に以下のクラスを設定：
  - クラス1：「メール文章作成の依頼」
  - クラス2：「会議メモの要約依頼」
  - クラス3：「タスク優先度付けの依頼」
  - クラス4：「その他の質問」

#### 3. メール文章生成機能の実装
- 「メール文章作成の依頼」クラスの「+」ボタンをクリック
- 「LLM」ノードを選択
- LLMノードの設定：
  - モデル：GPT-3.5-turbo（または利用可能な最適なモデル）
  - システムプロンプト：ハンドアウト末尾の「プロンプト例」を参照
  - ユーザープロンプト：`{{query}}`
- LLMノードの「+」ボタンをクリック
- 「回答」ノードを選択
- 回答ノードの設定：回答テキスト：`{{前のノードの出力}}`

#### 4. 会議メモ要約機能の実装
- 「会議メモの要約依頼」クラスの「+」ボタンをクリック
- 「LLM」ノードを選択
- LLMノードの設定：
  - モデル：GPT-3.5-turbo（または利用可能な最適なモデル）
  - システムプロンプト：ハンドアウト末尾の「プロンプト例」を参照
  - ユーザープロンプト：`{{query}}`
- LLMノードの「+」ボタンをクリック
- 「回答」ノードを選択
- 回答ノードの設定：回答テキスト：`{{前のノードの出力}}`

#### 5. タスク優先度付け機能の実装
- 「タスク優先度付けの依頼」クラスの「+」ボタンをクリック
- 「LLM」ノードを選択
- LLMノードの設定：
  - モデル：GPT-3.5-turbo（または利用可能な最適なモデル）
  - システムプロンプト：ハンドアウト末尾の「プロンプト例」を参照
  - ユーザープロンプト：`{{query}}`
- LLMノードの「+」ボタンをクリック
- 「回答」ノードを選択
- 回答ノードの設定：回答テキスト：`{{前のノードの出力}}`

#### 6. その他の質問への対応
- 「その他の質問」クラスの「+」ボタンをクリック
- 「LLM」ノードを選択
- LLMノードの設定：
  - モデル：GPT-3.5-turbo（または利用可能な最適なモデル）
  - システムプロンプト：ハンドアウト末尾の「プロンプト例」を参照
  - ユーザープロンプト：`{{query}}`
- LLMノードの「+」ボタンをクリック
- 「回答」ノードを選択
- 回答ノードの設定：回答テキスト：`{{前のノードの出力}}`

#### 7. アプリのテストと公開
- 「保存」ボタンをクリックしてワークフローを保存
- 「プレビュー」タブをクリックしてアプリをテスト
- 各機能をテストするためのサンプル入力：
  - メール文章作成：「取引先への商品納期遅延のお詫びメールを作成してください。理由は部品調達の遅れです。」
  - 会議メモ要約：「以下の会議メモを要約してください：[会議メモの内容]」
  - タスク優先度付け：「以下のタスクの優先順位を教えてください：1. 月次レポート作成、2. クライアントミーティング準備、3. チームメンバーの評価面談、4. 新規プロジェクト企画書作成」
- 必要に応じてプロンプトを調整
- 「公開」ボタンをクリックしてアプリを公開

### テスト用サンプル入力

**メール文章作成**：
```
取引先への商品納期遅延のお詫びメールを作成してください。理由は部品調達の遅れです。納期は2週間延期になります。
```

**会議メモ要約**：
```
以下の会議メモを要約してください：

プロジェクトXの進捗会議。参加者：田中、鈴木、佐藤、高橋。
議題1：システム開発の進捗状況。開発チームから報告あり、データベース設計が完了し、フロントエンド開発が80%完了。バックエンド開発は遅れており、追加リソースが必要。
議題2：クライアントからの追加要望。UI変更とレポート機能の追加要望あり。見積もりと納期への影響を検討する必要あり。
議題3：今後のスケジュール。現状のままだと納期に2週間の遅れが生じる可能性。対策として、外部リソースの活用を検討。次回会議は来週水曜日10時から。
```

**タスク優先度付け**：
```
以下のタスクの優先順位を教えてください：
1. 月次レポート作成（提出期限：明後日）
2. クライアントミーティング準備（ミーティング：明日午後）
3. チームメンバーの評価面談（期限：今週金曜）
4. 新規プロジェクト企画書作成（提出期限：来週月曜）
```

### プロンプト例

**メール文章生成**：
```
あなたはプロフェッショナルなビジネスメール作成アシスタントです。
ユーザーから提供された目的と要点に基づいて、適切なビジネスメールを作成してください。
メールは日本語のビジネス文書として適切な敬語と構成で作成し、以下の形式に従ってください：

1. 宛先（To）
2. 件名（Subject）
3. 挨拶
4. 本文（要点を簡潔に伝える）
5. 締めの言葉
6. 署名

ユーザーが提供していない情報は適切に補完してください。
```

**会議メモ要約**：
```
あなたは会議メモを効率的に要約するアシスタントです。
ユーザーから提供された会議メモを分析し、以下の形式で要約してください：

1. 会議の目的
2. 主要な議論ポイント（箇条書き3-5項目）
3. 決定事項（箇条書き）
4. 次のアクション（担当者と期限を含む箇条書き）
5. フォローアップが必要な事項

情報が不足している場合は、その旨を明記してください。
要約は簡潔かつ具体的に、重要なポイントを漏らさないようにしてください。
```

**タスク優先度付け**：
```
あなたはタスク管理のエキスパートです。
ユーザーから提供された複数のタスクを分析し、重要度と緊急度に基づいて優先順位を付けてください。
以下の形式で回答を構成してください：

1. 最優先タスク（今すぐ取り組むべきもの）
2. 高優先タスク（今日中に取り組むべきもの）
3. 中優先タスク（今週中に取り組むべきもの）
4. 低優先タスク（時間があれば取り組むもの）

各タスクについて、優先度を決めた理由も簡潔に説明してください。
また、効率的なタスク管理のためのアドバイスも1-2つ提供してください。
```

**その他の質問**：
```
あなたはビジネスアシスタントです。
ユーザーからの質問に対して、簡潔かつ役立つ回答を提供してください。
専門的な内容については、信頼できる情報源に基づいて回答し、不確かな情報には言及しないでください。
ビジネスマナーや効率化のヒントなど、実用的なアドバイスを心がけてください。
```

### 参考リンク

- [Dify公式サイト](https://dify.ai/)
- [Dify公式ドキュメント](https://docs.dify.ai/)
- [Dify GitHub](https://github.com/langgenius/dify)
- [Dify Discord コミュニティ](https://discord.gg/AhzKf7dNgk)
