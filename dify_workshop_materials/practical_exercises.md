# Difyを使ったAI駆動開発ハンズオン実践演習

## 演習1: 基本的なDify操作入門

### 目的
- Difyの基本的な操作方法を習得する
- アカウント設定とAPIキー連携の方法を理解する
- シンプルなAIチャットボットを作成する

### 手順

#### 1.1 アカウント作成とログイン
1. [Dify公式サイト](https://dify.ai/)にアクセスする
2. 「始める」ボタンをクリックする
3. GitHubまたはGoogleアカウントでログインする
4. ダッシュボード画面の確認と基本的なUIの説明

#### 1.2 APIキーの設定
1. 設定メニューからAPIキー設定画面に移動
2. OpenAI APIキーの入力方法（または共有アカウントの使用方法）
3. モデルプロバイダーの選択と確認
4. APIキー設定のテスト

#### 1.3 シンプルなチャットボットの作成
1. 「新規アプリケーション作成」ボタンをクリック
2. テンプレート「基本的なチャットボット」を選択
3. アプリケーション名と説明を入力
4. 基本設定の構成（モデル選択、パラメータ調整）
5. プロンプトの編集と調整
6. チャットボットのテストと動作確認

#### 1.4 チャットボットのカスタマイズ
1. プロンプトの改良（具体的な指示の追加）
2. システムプロンプトとユーザープロンプトの違い
3. パラメータ（温度、トップP、最大トークン数など）の調整と効果
4. 変数の活用方法

### 演習課題
1. 特定の専門分野（例：料理、旅行、技術サポートなど）に特化したチャットボットを作成する
2. プロンプトを工夫して、ボットのキャラクター性や応答スタイルをカスタマイズする
3. 変数を活用して、ユーザー情報を取り込んだ応答を生成する

## 演習2: RAGを活用した知識ベースチャットボット

### 目的
- RAG（検索拡張生成）の概念と重要性を理解する
- 知識ベースの作成と管理方法を習得する
- 外部ドキュメントを活用したチャットボットを構築する

### 手順

#### 2.1 知識ベースの作成
1. ナレッジベースメニューから新規知識ベース作成
2. 知識ベース名と説明の入力
3. インデックス方式の選択と説明（ベクトル検索、フルテキスト検索、ハイブリッド）
4. 埋め込みモデルの選択

#### 2.2 ドキュメントのアップロードと処理
1. サンプルドキュメント（PDF、Markdown、テキストなど）の準備
2. ドキュメントのアップロード方法
3. チャンク設定の調整（チャンクサイズ、オーバーラップなど）
4. ドキュメント処理状況の確認

#### 2.3 RAGパイプラインの設定
1. アプリケーション作成画面でRAG機能の有効化
2. 知識ベースの接続
3. 検索方式の選択（セマンティック検索、キーワード検索、ハイブリッド）
4. 検索パラメータの調整（類似度閾値、検索結果数など）

#### 2.4 RAGチャットボットのテストと改善
1. 知識ベースに関連する質問でテスト
2. 回答の精度と関連性の確認
3. プロンプトの調整による回答品質の向上
4. 引用と出典の表示設定

### 演習課題
1. 提供されたドキュメントセット（例：製品マニュアル、FAQ、技術文書など）を知識ベースとして取り込む
2. 特定のユースケース（例：技術サポート、社内ナレッジ共有など）に特化したRAGチャットボットを構築する
3. 回答の精度を向上させるためのプロンプト調整と検索パラメータの最適化を行う

## 演習3: ワークフローを活用した高度なAIアプリケーション開発

### 目的
- Difyのワークフロー機能の基本を理解する
- 複雑なAIアプリケーションの設計方法を習得する
- 条件分岐や変数を活用した高度なワークフローを構築する

### 手順

#### 3.1 ワークフローの基本概念
1. チャットフローとワークフローの違い
2. ワークフロー作成画面の基本操作
3. ノードの種類と機能の説明

#### 3.2 基本的なワークフローの構築
1. 新規ワークフロー作成
2. 入力ノードの設定
3. LLMノードの追加と設定
4. 出力ノードの設定
5. ノード間の接続とデータフロー

#### 3.3 条件分岐と変数の活用
1. 条件ノードの追加と設定
2. 変数の定義と使用方法
3. 分岐処理の実装
4. ループ処理の実装

#### 3.4 外部ツールとの連携
1. ツールノードの追加
2. APIリクエストの設定
3. レスポンス処理の実装
4. エラーハンドリング

### 演習課題
1. 多段階の対話を行うカスタマーサポートワークフローの構築
   - ユーザーの問題カテゴリを分類
   - カテゴリに応じた専門的な回答を生成
   - 必要に応じて追加情報を要求

2. データ分析レポート生成ワークフローの構築
   - データ入力の受け取り
   - データの分析と要約
   - 視覚的なレポート形式での出力
   - 推奨アクションの提案

## 演習4: 実践的なビジネスシナリオに基づくAIアプリケーション開発

### 目的
- 実際のビジネスニーズに基づいたAIアプリケーションを設計・開発する
- チームでの協働開発プロセスを体験する
- 開発したアプリケーションのプレゼンテーションとフィードバックを行う

### シナリオ例

#### シナリオA: マーケティングコンテンツジェネレーター
- ターゲット層、トーン、目的に基づいたマーケティングコンテンツを生成
- ブランドガイドラインに準拠したコンテンツ作成
- 複数のフォーマット（SNS投稿、ブログ記事、メールなど）に対応

#### シナリオB: 社内ナレッジマネジメントシステム
- 社内文書や手順書を知識ベースとして活用
- 部門別の情報アクセス制御
- 新入社員向けのオンボーディング支援機能

#### シナリオC: カスタマーサポート自動化システム
- 製品マニュアルやFAQを知識ベースとして活用
- 問い合わせの自動分類と優先度付け
- エスカレーションが必要なケースの判断と対応

#### シナリオD: データ分析レポート生成ツール
- 生データの分析と洞察抽出
- 視覚的なレポート生成
- 経営判断のための推奨事項提示

### 開発プロセス

1. **要件定義（15分）**
   - シナリオの詳細理解
   - ユーザーニーズの特定
   - 機能要件のリスト化

2. **設計（20分）**
   - アプリケーション構造の設計
   - 必要な知識ベースの計画
   - ワークフローの設計

3. **開発（40分）**
   - 知識ベースの構築
   - プロンプトの作成と調整
   - ワークフローの実装
   - テストとデバッグ

4. **プレゼンテーション準備（5分）**
   - デモシナリオの準備
   - プレゼンテーション資料の作成

5. **発表とフィードバック（各チーム10分）**
   - アプリケーションのデモンストレーション
   - 設計思想と実装上の工夫の説明
   - 質疑応答とフィードバック

### 評価基準
1. **機能性**：要件に沿った機能が実装されているか
2. **ユーザビリティ**：使いやすく、直感的なインターフェースか
3. **プロンプト設計**：効果的なプロンプトエンジニアリングがされているか
4. **知識ベース活用**：RAGが適切に構成され、正確な情報提供ができるか
5. **ワークフロー設計**：論理的で効率的なワークフローが構築されているか
6. **創造性**：独自のアイデアや工夫が見られるか

## 演習5: 応用と発展的な活用方法

### 目的
- Difyの高度な機能と連携方法を理解する
- 実運用を見据えたアプリケーション開発のベストプラクティスを学ぶ
- デプロイと公開方法を習得する

### 内容

#### 5.1 外部APIとの連携
1. OpenAPI仕様に基づくAPI連携
2. 外部データソースの活用
3. サードパーティサービスとの統合

#### 5.2 カスタムツールの活用
1. カスタムツールの作成方法
2. ツールの設定とパラメータ
3. ツール連携のベストプラクティス

#### 5.3 デプロイと公開方法
1. アプリケーションの公開設定
2. アクセス制御とセキュリティ
3. APIキーの管理と更新

#### 5.4 実運用における注意点
1. コスト管理と最適化
2. パフォーマンスモニタリング
3. セキュリティとプライバシーの考慮事項
4. スケーリングと負荷対策

### 演習課題
1. 外部APIを活用した拡張機能の実装
2. 本番環境を想定したセキュリティ設定の構成
3. 運用コスト最適化のための設定調整
